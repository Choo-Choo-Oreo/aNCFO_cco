save_admiral_pp_for_later = {
	enable = {
		has_war = no
		threat < 0.3
		has_political_power < 200
	}
	abort = {
		OR = {
			has_war = yes
			threat > 0.3
			has_political_power > 200
		}
	}

	ai_strategy = { # dont burn PP on admirals (can still get free ones)
		type = pp_spend_priority
		id = admiral
		value = -100
	}
}

default_navy_unit_production = {
	enable = {
		always = yes
		not = {
			original_tag = MRC
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = unit_ratio
		id = convoy
		value = 12
	}
	ai_strategy = {
		type = unit_ratio
		id = capital_ship
		value = 12
	}
	ai_strategy = {
		type = unit_ratio
		id = screen_ship
		value = 36
	}
	ai_strategy = {
		type = unit_ratio
		id = submarine
		value = 12
	}
}

default_role_ratios_vanilla = {
	enable = {
		not = {
			has_dlc = "Man the Guns"
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = naval_capital
		value = 125
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = 125
	}

	ai_strategy = {
		type = role_ratio
		id = naval_sub
		value = 125
	}

	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 100
	}
}
default_role_ratios_mtg = {
	enable = {
		has_dlc = "Man the Guns"
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -20 # 40
	}

	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -20
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -15 # 35
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 50
	}

	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 40
	}

	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = 25
	}

	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_light
		value = 15
	}

	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = 10
	}

	ai_strategy = {
		type = role_ratio
		id = naval_mine_sweeper
		value = 10
	}

	ai_strategy = {
		type = role_ratio
		id = naval_mine_layer
		value = 15
	}
}

#convoy_voy_voy_voy = {
#	enable = {
#		has_dlc = "Man the Guns"
#		convoy_threat > 0.2
#	}
#	abort = {
#		convoy_threat < 0.2
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_cruiser_light
#		value = -20
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_escort
#		value = 25
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_mine_layer
#		value = -10
#	}
#	ai_strategy = {
#		type = unit_ratio
#		id = screen_ship
#		value = 30
#	}

#	ai_strategy = {
#		type = unit_ratio
#		id = capital_ship
#		value = -10
#	}

#	ai_strategy = {
#		type = unit_ratio
#		id = convoy
#		value = 25
#	}
#}

#ill_show_you_mine = {
#	enable = {
#		has_dlc = "Man the Guns"
#		mine_threat > 0.2
#	}
#	abort = {
#		mine_threat < 0.2
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_cruiser_heavy
#		value = -10
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_mine_sweeper
#		value = 20
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_mine_layer
#		value = -10
#	}
#}
#ill_show_you_mine_2 = {
#	enable = {
#		has_dlc = "Man the Guns"
#		mine_threat > 0.5
#	}
#	abort = {
#		mine_threat < 0.5
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_cruiser_light
#		value = -10
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_mine_sweeper
#		value = 20
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_mine_layer
#		value = -10
#	}
#}

very_low_naval_focused_nation = {
	enable = {
		NOT = {
			num_of_naval_factories > 6
			num_of_naval_factories < 12
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dockyard_to_military_factory_ratio
		value = -20
	}
	# Heavy Ships
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -24
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -12
	}
	# Carriers
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -24
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -12
	}
	# Cruisers
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -12
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_light
		value = 80
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 100
	}
	# Destroyers
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = 80
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_sweeper
		value = 10
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_layer
		value = 30
	}
	# Submarines
	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 50
	}
}
low_naval_focused_nation = {
	enable = {
		NOT = {
			num_of_naval_factories > 12
			num_of_naval_factories < 18
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dockyard_to_military_factory_ratio
		value = -10
	}
	# Heavy Ships
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = 0
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = 9
	}
	# Carriers
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = 0
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = 9
	}
	# Cruisers
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = 0
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_light
		value = 80
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 150
	}
	# Destroyers
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = 40
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_sweeper
		value = 10
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_layer
		value = 20
	}
	# Submarines
	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 25
	}
}
medium_naval_focused_nation = {
	enable = {
		NOT = {
			num_of_naval_factories > 18
			num_of_naval_factories < 24
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dockyard_to_military_factory_ratio
		value = 0
	}
	# Heavy Ships
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = 3
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = 18
	}
	# Carriers
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = 3
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = 18
	}
	# Cruisers
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = 10
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_light
		value = 80
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 200
	}
	# Destroyers
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_sweeper
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_layer
		value = 10
	}
	# Submarines
	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 0
	}
}
high_naval_focused_nation = {
	enable = {
		NOT = {
			num_of_naval_factories > 24
			num_of_naval_factories < 30
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dockyard_to_military_factory_ratio
		value = 10
	}
	# Heavy Ships
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = 12
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = 36
	}
	# Carriers
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = 12
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = 36
	}
	# Cruisers
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_light
		value = 80
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 200
	}
	# Destroyers
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_sweeper
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_layer
		value = 10
	}
	# Submarines
	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -50
	}
}
very_high_naval_focused_nation = {
	enable = {
		NOT = {
			num_of_naval_factories > 30
			num_of_naval_factories < 48
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dockyard_to_military_factory_ratio
		value = 20
	}
	# Heavy Ships
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = 48
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = 72
	}
	# Carriers
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = 48
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = 72
	}
	# Cruisers
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_light
		value = 80
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 200
	}
	# Destroyers
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_sweeper
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_layer
		value = 10
	}
	# Submarines
	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -100
	}
}
unnaturally_high_naval_focused_nation = { # Extra for rare super naval states.
	enable = {
		NOT = {
			num_of_naval_factories > 48
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dockyard_to_military_factory_ratio
		value = 35
	}
	# Heavy Ships
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = 124
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = 48
	}
	# Carriers
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = 124
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = 48
	}
	# Cruisers
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = 75
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_light
		value = 60
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 300
	}
	# Destroyers
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -50
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_sweeper
		value = 35
	}
	ai_strategy = {
		type = role_ratio
		id = naval_mine_layer
		value = 35
	}
	# Submarines
	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 100
	}
}

stall_naval_capital_bb_production = {
	enable = {
		has_navy_size = {
			unit = battleship
			size > 16
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = unit_ratio
		id = capital_ship
		value = -32
	}
}
stop_naval_capital_bb_production = {
	enable = {
		has_navy_size = {
			unit = battleship
			size > 48
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = unit_ratio
		id = capital_ship
		value = -1000
	}
}
stall_naval_capital_bc_production = {
	enable = {
		has_navy_size = {
			unit = battle_cruiser
			size > 24
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -24
	}
}
stop_naval_capital_bc_production = {
	enable = {
		has_navy_size = {
			unit = battle_cruiser
			size > 96
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -1000
	}
}
stall_naval_carrier_production = {
	enable = {
		has_navy_size = {
			unit = carrier
			size > 12 # Was 4
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -32
	}
}
stop_naval_carrier_production = {
	enable = {
		has_navy_size = {
			unit = carrier
			size > 18 # Was 4
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -1000
	}
}
#stall_naval_carrier_light_production = { # No Light Carrier Unit
#	enable = {
#		has_navy_size = {
#			unit = naval_carrier_light
#			size > 8
#		}
#	}
#	abort_when_not_enabled = yes
#
#	ai_strategy = {
#		type = role_ratio
#		id = naval_carrier_light
#		value = -24
#	}
#}
stall_naval_cruiser_heavy_production = {
	enable = {
		has_navy_size = {
			unit = heavy_cruiser
			size > 64
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -16
	}
}

#dont_build_capitals_if_on_treaty = {
#	enable = {
#		has_idea = MTG_naval_treaty_adherent
#		not = {
#			OR = {
#				original_tag = ITA
#			}
#		}
#	}

#	abort = {
#		not = { has_idea = MTG_naval_treaty_adherent }
#	}

#	ai_strategy = {
#		type = unit_ratio
#		id = capital_ship
#		value = -2		 #1 to 2
#	}
#	ai_strategy = {
#		type = role_ratio
#		id = naval_capital_bb
#		value = -100
#	}

#	ai_strategy = {
#		type = role_ratio
#		id = naval_capital_bc
#		value = -100
#	}
#}



heavens_gate_is_dangerous = {
	allowed = { is_harmonainus_imperious_extras = NO }
	enable = {
		always = yes
	}
	abort_when_not_enabled = yes
	
	ai_strategy = {
		type = naval_avoid_region
		id = 2
		value = -100
	}
}