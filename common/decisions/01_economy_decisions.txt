economy_decisions = {
    minor_demobilization_factory_conversion = {

        icon = generic_industry

        available = {
            OR = {
                has_idea = undisturbed_isolation
                has_idea = isolation
                has_idea = civilian_economy
            }
            #num_of_military_factories > 5
            #num_of_civilian_factories_available_for_projects < 5 #Change this if amount of factories change
            is_ai = no
        }

        visible = {
            has_defensive_war = no
            has_offensive_war = no
            is_major = no
        }

        fire_only_once = no

        days_re_enable = 30

        cost = 100

        complete_effect = {
            replace_arms_with_civ_factories = yes
            add_stability = 0.01
        }
        ai_will_do = {
            base = 0
            modifier = {
                add = -9999
                pre_civilwar_trigger = yes
            }
            modifier = {
                add = 5
                num_of_civilian_factories > 25
                num_of_civilian_factories_available_for_projects < 15
            }
            modifier = {
                add = 5
                factor = 5
                num_of_civilian_factories > 50
                num_of_civilian_factories_available_for_projects < 30
            }
            modifier = {
                add = -10
                factor = -10
                has_war = yes
            }
        }
    }
    major_demobilization_factory_conversion = {

        icon = generic_industry

        available = {
            OR = {
                has_idea = undisturbed_isolation
                has_idea = isolation
                has_idea = civilian_economy
            }
            #num_of_military_factories > 10
            #num_of_civilian_factories_available_for_projects < 10 #Change this if amount of factories change
            is_ai = no
        }

        visible = {
            has_defensive_war = no
            has_offensive_war = no
            is_major = yes
        }

        fire_only_once = no

        days_re_enable = 30

        cost = 100

        complete_effect = {
            replace_arms_with_civ_factories = yes
            add_war_support = 0.01
            add_stability = 0.03
        }
        ai_will_do = {
            base = 0
            modifier = {
                add = -9999
                pre_civilwar_trigger = yes
            }
            modifier = {
                add = 5
                num_of_civilian_factories > 25
                num_of_civilian_factories_available_for_projects < 15
            }
            modifier = {
                add = 5
                factor = 5
                num_of_civilian_factories > 50
                num_of_civilian_factories_available_for_projects < 30
            }
            modifier = {
                add = -10
                factor = -10
                has_war = yes
            }
        }
    }

    minor_demobilization_factory_conversion_ai = {

        icon = generic_industry

        available = {
            OR = {
                has_idea = undisturbed_isolation
                has_idea = isolation
                has_idea = civilian_economy
            }
            num_of_military_factories > 5
            num_of_civilian_factories_available_for_projects < 5 #Change this if amount of factories change
            is_ai = yes
        }

        visible = {
            has_defensive_war = no
            has_offensive_war = no
            is_major = no
            is_ai = yes
        }

        fire_only_once = no

        days_re_enable = 90

        cost = 100

        complete_effect = {
            replace_arms_with_civ_factories = yes
            add_stability = 0.01
        }
        ai_will_do = {
            base = 0
            modifier = {
                add = -9999
                pre_civilwar_trigger = yes
            }
            modifier = {
                add = 5
                num_of_civilian_factories > 25
                num_of_civilian_factories_available_for_projects < 15
            }
            modifier = {
                add = 5
                factor = 5
                num_of_civilian_factories > 50
                num_of_civilian_factories_available_for_projects < 30
            }
            modifier = {
                add = -10
                factor = -10
                has_war = yes
            }
        }
    }
    major_demobilization_factory_conversion_ai = {

        icon = generic_industry

        available = {
            OR = {
                has_idea = undisturbed_isolation
                has_idea = isolation
                has_idea = civilian_economy
            }
            num_of_military_factories > 10
            num_of_civilian_factories_available_for_projects < 10 #Change this if amount of factories change
            is_ai = yes
        }

        visible = {
            has_defensive_war = no
            has_offensive_war = no
            is_major = yes
            is_ai = yes
        }

        fire_only_once = no

        days_re_enable = 90

        cost = 100

        complete_effect = {
            replace_arms_with_civ_factories = yes
            add_war_support = 0.01
            add_stability = 0.03
        }
        ai_will_do = {
            base = 0
            modifier = {
                add = -9999
                pre_civilwar_trigger = yes
            }
            modifier = {
                add = 5
                num_of_civilian_factories > 25
                num_of_civilian_factories_available_for_projects < 15
            }
            modifier = {
                add = 5
                factor = 5
                num_of_civilian_factories > 50
                num_of_civilian_factories_available_for_projects < 30
            }
            modifier = {
                add = -10
                factor = -10
                has_war = yes
            }
        }
    }

    infrastructure_building_slot = {

        icon = generic_construction

        allowed = {
            always = yes
        }

        cost = 100
        fire_only_once = no

        days_re_enable = 30

        available = {
            any_owned_state = {
                NOT = { has_state_flag = infrastructure_building_slot_flag }
                is_fully_controlled_by = ROOT
                free_building_slots = {
                    building = infrastructure
                    size < 1
                }
            }
        }

        visible = {
            any_owned_state = {
                NOT = { has_state_flag = infrastructure_building_slot_flag }
                is_fully_controlled_by = ROOT
                free_building_slots = {
                    building = infrastructure
                    size < 1
                }
            }
        }

        complete_effect = {
            random_owned_state = {
                limit = {
                    is_fully_controlled_by = ROOT
                    is_owned_by = ROOT
                    free_building_slots = {
                        building = industrial_complex
                        size > 1
                        include_locked = yes
                    }
                    free_building_slots = {
                        building = infrastructure
                        size < 1
                    }
                    NOT = { has_state_flag = infrastructure_building_slot_flag }
                }
                add_extra_state_shared_building_slots = 1
                set_state_flag = infrastructure_building_slot_flag
            }
        }
        ai_will_do = {
            factor = 1
            modifier = {
                add = -9999
                pre_civilwar_trigger = yes
            }
            modifier = {
                factor = 10
                any_owned_state = { free_building_slots = { building = industrial_complex size < 1 include_locked = no } }
            }
        }
    }
}